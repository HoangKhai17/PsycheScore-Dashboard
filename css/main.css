/* =================================================================
   PHẦN 1: RESET CSS
   ================================================================= */

   *,
   *::before,
   *::after {
       box-sizing: border-box;
       margin: 0;
       padding: 0;
   }
   
   html, body {
       height: 100%;
   }
   
   body {
       font-family: 'Fira Code', monospace;
       line-height: 1.5;
       -webkit-font-smoothing: antialiased;
       background-color: var(--bg-main);
       color: var(--text-primary);
       transition: background-color .3s ease, color .3s ease;
   }
   
   img, picture, video, canvas, svg {
       display: block;
       max-width: 100%;
   }
   
   input, button, textarea, select {
       font: inherit;
   }
   
   a {
       text-decoration: none;
       color: inherit;
   }
   
   ul {
       list-style: none;
   }
   
   /* =================================================================
      PHẦN 2: CSS VARIABLES
      ================================================================= */
   
   :root {
       /* ----- Colors ----- */
       --bg-main: #F9FAFB; 
       --bg-sidebar: #FFFFFF;
       --bg-content: #FFFFFF;
       
       /* Card Backgrounds */
       --bg-card-btc: #FFF8ED;
       --bg-card-usdt: #F0FFF9;
       --bg-card-ada: #F0F6FF;
       --bg-card-bnb: #FEFDF0;
   
       /* Text */
       --text-primary: #1F2937; 
       --text-secondary: #6B7280; 
       --text-white: #FFFFFF;
       --text-green: #00852c;
       --text-red: #EF4444;
       
       /* --- PHẦN ACCENT ĐÃ SỬA ---
         1. Đã thêm gradient
         2. Đã thêm lại màu solid (đồng nhất) để dùng cho border
       */
       --accent-gradient: linear-gradient(150deg, #00822c 0%, #b1d94e 100%);
       --accent-solid-green: #00852c;
       --accent-solid-green-dark: #004918;
       --accent-border: #E5E7EB; /* Đường viền */
   
   
       /* ----- Sizing & Spacing ----- */
       --sidebar-width: 260px;
       --header-height: 80px;
       --border-radius-sm: 20px;
       --border-radius-md: 25px;
       --border-radius-lg: 30px;
   
       --padding-container: 24px;
       --padding-card: 20px;


       /* ----- Font Size ----- */
       --font-size-24: 24px;
       --font-size-22: 22px;
       --font-size-20: 20px;
       --font-size-18: 18px;

       /* ----- Font Weight ----- */
       --font-weight-600: 600;
       --font-weight-500: 500;
       --font-weight-400: 400;
       --font-weight-300: 300;
       --font-weight-200: 200;
       --font-weight-100: 100;
   }
   
   body.dark-theme {
       --bg-main: #111827;
       --bg-sidebar: #1F2937;
       --bg-content: #1F2937;
       
       --bg-card-btc: #2c2a2e;
       --bg-card-usdt: #2a2f2e;
       --bg-card-ada: #2a2d3f;
       --bg-card-bnb: #2d2d2e;
   
       --text-primary: #F9FAFB;
       --text-secondary: #9CA3AF;
       
       --accent-border: #374151;
   }
   
   /* =================================================================
      PHẦN 3: MAIN STYLES
      ================================================================= */
   
   /* ----- 1. Layout chính ----- */
   .dashboard-container {
       display: grid;
       grid-template-columns: var(--sidebar-width) 1fr;
       height: 100vh;
   }
   
   .sidebar {
       background-color: var(--bg-sidebar);
       border-right: 1px solid var(--accent-border);
       padding: var(--padding-container);
       display: flex;
       flex-direction: column;
       overflow-y: auto;
       transition: background-color .3s ease, border-right .3s ease;
   }
   
   .main-content {
       background-color: var(--bg-main);
       padding: var(--padding-container);
       overflow-y: auto;
       display: flex;
       flex-direction: column;
   }
   
   /* ----- 2. Sidebar ----- */
   .sidebar-header {
       margin-bottom: 24px;
   }
   .sidebar-logo {
       height: 40px;
       width: auto;
   }
   
   .user-profile {
       display: flex;
       align-items: center;
       gap: 12px;
       margin-bottom: 24px;
   }
   .avatar {
       width: 40px;
       height: 40px;
       border-radius: 50%;
   }
   .user-details {
       display: flex;
       flex-direction: column;
   }
   .user-name {
       font-weight: 600;
       font-size: 14px;
       color: var(--text-primary);
   }
   .user-role {
       font-size: 12px;
       color: var(--text-secondary);
       background-color: var(--bg-main);
       padding: 2px 6px;
       border-radius: 4px;
       text-transform: uppercase;
   }
   
   .sidebar-nav ul {
       display: flex;
       flex-direction: column;
       gap: 8px;
   }
   .sidebar-nav a {
       display: flex;
       align-items: center;
       gap: 12px;
       padding: 10px 12px;
       border-radius: var(--border-radius-sm);
       font-size: 14px;
       font-weight: 500;
       color: var(--text-secondary);
       transition: all 0.2s ease;
   }
   .sidebar-nav a i {
       font-size: 20px;
   }
   .sidebar-nav a:hover {
       background-color: var(--bg-main);
       color: var(--text-primary);
   }
   
   /* === ĐÃ SỬA === */
   .sidebar-nav a.active {
       background-image: var(--accent-gradient); /* <-- Sửa từ background-color */
       color: var(--text-white);
   }
   .sidebar-nav .has-dropdown a {
       justify-content: space-between;
   }
   
   /* ----- 3. Main Header ----- */
   .main-header {
       display: flex;
       justify-content: space-between;
       align-items: center;
       margin-bottom: 24px;
   }

   .breadcrumb ol {
    display: flex;
    align-items: center;
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: var(--font-size-16);
    font-weight: var(--font-weight-500);
}

.breadcrumb li a {
    color: var(--text-secondary);
    text-decoration: none;
    transition: color 0.2s ease;
}

.breadcrumb li a:hover {
    color: var(--text-primary);
}

.breadcrumb li:not(:last-child)::after {
    content: '/';
    margin: 0 10px;
    color: var(--text-secondary);
}

.breadcrumb li[aria-current="page"] {
    color: var(--text-primary);
}
   
   .header-actions {
       display: flex;
       align-items: center;
       gap: 16px;
   }
   .theme-toggle {
       background: var(--bg-content);
       border: 1px solid var(--accent-border);
       border-radius: var(--border-radius-sm);
       width: 40px;
       height: 40px;
       cursor: pointer;
       font-size: 20px;
       color: var(--text-secondary);
       transition: background-color .3s ease, color .3s ease, border-color .3s ease;
   }
   .btn {
       border: none;
       padding: 10px 16px;
       border-radius: var(--border-radius-sm);
       font-weight: 600;
       cursor: pointer;
   }
   
   /* === ĐÃ SỬA === */
   .btn-primary {
       background-image: var(--accent-gradient); /* <-- Sửa từ background-color */
       color: var(--text-white);
       transition: filter 0.2s ease; /* <-- Sửa transition */
   }
   .btn-primary:hover {
       filter: brightness(0.9); /* <-- Sửa hiệu ứng hover */
   }
   
   .user-balance {
       display: flex;
       align-items: center;
       background: var(--bg-content);
       border: 1px solid var(--accent-border);
       border-radius: var(--border-radius-md);
       padding: 8px;
   }
   .avatar-sm {
       width: 32px;
       height: 32px;
       border-radius: 50%;
       margin-right: 12px;
   }
   .balance-details {
       display: flex;
       flex-direction: column;
       margin-right: 16px;
   }
   .balance-label {
       font-size: 12px;
       color: var(--text-secondary);
   }
   .balance-amount {
       font-size: 16px;
       font-weight: 700;
       color: var(--text-primary);
   }
   .top-up-btn {
       background: var(--bg-main);
       border: 1px solid var(--accent-border);
       border-radius: var(--border-radius-sm);
       padding: 8px 12px;
       font-size: 12px;
       font-weight: 600;
       color: var(--text-primary);
       cursor: pointer;
       display: flex;
       align-items: center;
       gap: 4px;
   }
   
   /* ----- 6. Footer ----- */
   .main-footer {
       margin-top: auto;
       padding-top: 14px;
       border-top: 1px solid var(--accent-border);
       text-align: center;
       font-size: 14px;
       color: var(--text-secondary);
       transition: border-color .3s ease, color .3s ease;
   }

   /* ----- 7. Floating Action Button (FAB) ----- */
   
   /* === ĐÃ SỬA === */
   .fab {
       position: fixed;
       bottom: 30px;
       right: 30px;
       width: 56px;
       height: 56px;
       background-image: var(--accent-gradient); /* <-- Sửa từ background-color */
       color: var(--text-white);
       border: none;
       border-radius: 50%;
       font-size: 28px;
       display: flex;
       align-items: center;
       justify-content: center;
       cursor: pointer;
       box-shadow: 0 4px 12px rgba(0,0,0,0.15);
       transition: all 0.2s ease;
   }
   .fab:hover {
       filter: brightness(0.9); /* <-- Sửa hiệu ứng hover */
       transform: translateY(-2px);
   }
   
   /* ----- 8. Connect Wallet Popup ----- */
   .popup-overlay {
       position: fixed;
       top: 0;
       left: 0;
       width: 100%;
       height: 100%;
       background-color: rgba(0, 0, 0, 0.5);
       display: flex;
       align-items: center;
       justify-content: center;
       opacity: 0;
       visibility: hidden;
       transition: opacity 0.3s ease, visibility 0.3s ease;
       z-index: 1000;
   }
   
   .popup-overlay.show {
       opacity: 1;
       visibility: visible;
   }
   
   .popup-content {
       background-color: var(--bg-content);
       border-radius: var(--border-radius-lg);
       padding: var(--padding-container);
       width: 90%;
       max-width: 400px;
       transform: scale(0.9);
       transition: transform 0.3s ease, background-color 0.3s ease;
   }
   
   .popup-overlay.show .popup-content {
       transform: scale(1);
   }
   
   .popup-header {
       display: flex;
       justify-content: space-between;
       align-items: center;
       margin-bottom: 16px;
       border-bottom: 1px solid var(--accent-border);
       padding-bottom: 12px;
   }
   
   .popup-header h3 {
       font-size: 20px;
       font-weight: 700;
       color: var(--text-primary);
   }
   
   .close-popup {
       background: none;
       border: none;
       font-size: 24px;
       color: var(--text-secondary);
       cursor: pointer;
   }
   
   .popup-body p {
       font-size: 14px;
       color: var(--text-secondary);
       margin-bottom: 20px;
       text-align: center;
   }
   
   .wallet-list {
       display: flex;
       flex-direction: column;
       gap: 12px;
   }
   
   .wallet-list a {
       display: flex;
       align-items: center;
       padding: 12px;
       border: 1px solid var(--accent-border);
       border-radius: var(--border-radius-md);
       transition: background-color 0.2s ease, border-color 0.2s ease;
   }
   
   /* === ĐÃ SỬA === */
   .wallet-list a:hover {
       background-color: var(--bg-main);
       border-color: var(--accent-solid-green); /* <-- Sửa sang màu solid */
   }
   
   .wallet-list img {
       width: 40px;
       height: 40px;
       border-radius: 50%;
       margin-right: 16px;
   }
   
   .wallet-list span {
       font-weight: 600;
       color: var(--text-primary);
       flex-grow: 1;
   }
   
   .wallet-list i {
       font-size: 20px;
       color: var(--text-secondary);
   }
   
/* =================================================================
   PHẦN 11: PROFILE PAGE
   ================================================================= */

.profile-container {
    display: grid;
    gap: 24px;
}

.card {
    background-color: var(--bg-content);
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--accent-border);
    transition: background-color .3s ease, border-color .3s ease;
    overflow: hidden; /* Ensures child borders don't poke out */
}

.card-header, .card-body, .card-footer {
    padding: 20px 24px;
}

.card-header {
    border-bottom: 1px solid var(--accent-border);
    transition: border-color .3s ease;
}

.card-header h4 {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 4px;
}

.card-header p {
    font-size: 14px;
    color: var(--text-secondary);
}

.card-footer {
    border-top: 1px solid var(--accent-border);
    text-align: right;
    background-color: var(--bg-main);
    transition: border-color .3s ease, background-color .3s ease;
}

.avatar-section {
    display: flex;
    align-items: center;
    gap: 24px;
    flex-wrap: wrap;
}

.profile-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
}

.avatar-actions h3 {
    font-size: 24px;
    font-weight: 600;
}
.avatar-actions p {
    color: var(--text-secondary);
    margin-bottom: 12px;
}

.btn-secondary {
    background-color: var(--bg-main);
    border: 1px solid var(--accent-border);
    color: var(--text-primary);
    transition: background-color .3s ease, color .3s ease, border-color .3s ease;
}
.btn-secondary:hover {
    background-color: #f3f4f6; /* Lighten */
}
body.dark-theme .btn-secondary:hover {
    background-color: #374151; /* Darken */
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 24px;
}

.form-group-full {
    grid-column: 1 / -1;
}

.form-group label {
    display: block;
    font-weight: 500;
    margin-bottom: 8px;
    font-size: 14px;
}

.form-control {
    width: 100%;
    padding: 10px 14px;
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--accent-border);
    background-color: var(--bg-content);
    color: var(--text-primary);
    transition: background-color .3s ease, color .3s ease, border-color .3s ease;
}

.form-control:focus {
    outline: none;
    border-color: var(--accent-solid-green);
}

.form-control[readonly] {
    background-color: var(--bg-main);
    cursor: not-allowed;
}

.input-with-button {
    display: flex;
    gap: 8px;
}

.input-with-button .form-control {
    flex-grow: 1;
}

.btn-icon {
    flex-shrink: 0;
    width: 42px;
    height: 42px;
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--accent-border);
    background-color: var(--bg-content);
    color: var(--text-secondary);
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color .3s ease, color .3s ease, border-color .3s ease;
}
.btn-icon:hover {
    background-color: var(--bg-main);
    color: var(--text-primary);
}

/* =================================================================
   PHẦN 12: DASHBOARD GRID
   ================================================================= */

.dashboard-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 24px;
    align-items: start;
}

.main-chart-container .card-body {
    min-height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.chart-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    background-color: var(--bg-main);
    border-radius: var(--border-radius-md);
    border: 2px dashed var(--accent-border);
}

.stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
}

.stat-card .card-header h5 {
    font-size: 16px;
    font-weight: 600;
    margin: 0;
}

.stat-card .card-body {
    padding-top: 0;
}

.stat-card .card-body p {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
}


/* =================================================================
   PHẦN 10: CHAT INTERFACE
   ================================================================= */

.chat-container {
    flex-grow: 1;
    display: flex; /* Changed from grid */
    flex-direction: column;
    overflow: hidden;
}

.chat-history {
    flex-grow: 1;
    overflow-y: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px; /* Reduced gap */
}

.popup-actions {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    margin-top: 24px;
}

.chat-message {
    display: flex;
    gap: 16px;
    max-width: 85%;
    align-items: flex-end; /* Align to bottom */
}

.chat-message .avatar {
    width: 45px;
    height: 45px;
    flex-shrink: 0;
}

.chat-message .message-content {
    padding: 12px 16px;
    border-radius: var(--border-radius-md);
    background-color: var(--bg-content);
    transition: background-color .3s ease;
}

.chat-message.user-message {
    align-self: flex-end; 
    flex-direction: row-reverse; /* Reverse order for avatar on the right */
}

.chat-message.user-message .message-content {
    background-image: var(--accent-gradient);
    color: var(--text-white);
}

.chat-message.bot-message {
    align-self: flex-start;
}

/* New styles for Quick Replies */
.quick-replies-container {
    align-self: flex-start;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    padding-left: 61px; /* Align with bot message content (avatar width + gap) */
    margin-top: 8px;
    margin-bottom: 10px;
}

.quick-reply-btn {
    padding: 8px 16px;
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--accent-solid-green);
    background-color: var(--bg-content);
    color: var(--accent-solid-green);
    font-weight: 500;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.quick-reply-btn:hover {
    background-color: var(--accent-solid-green);
    color: var(--text-white);
}

/* =================================================================
   PHẦN 13: ROLE VERIFICATION & RESULTS
   ================================================================= */

.role-checkbox-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin-top: 20px;
  text-align: left;
}

.role-checkbox-item {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 16px;
  cursor: pointer;
}

.role-checkbox-item input[type="checkbox"] {
  width: 20px;
  height: 20px;
  accent-color: var(--accent-solid-green);
}

.analyzing-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.analyzing-overlay.show {
  opacity: 1;
  visibility: visible;
}

.analyzing-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  color: var(--text-white);
}

.spinner {
  width: 60px;
  height: 60px;
  border: 6px solid rgba(255, 255, 255, 0.3);
  border-top-color: var(--text-white);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.analyzing-text {
  font-size: 18px;
  font-weight: 500;
  opacity: 0;
  animation: fadeInOut 4s linear forwards;
}

#analyzing-text-2 {
  animation-delay: 4s;
}
#analyzing-text-3 {
  animation-delay: 8s;
}

@keyframes fadeInOut {
  0%, 100% { opacity: 0; }
  25%, 75% { opacity: 1; }
}

.results-body {
  text-align: left;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.result-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid var(--accent-border);
}
.result-item:last-of-type {
    border-bottom: none;
}

.result-item span {
  font-size: 16px;
  color: var(--text-secondary);
}

.result-item strong {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
}

.result-item .score {
  font-size: 22px;
  font-weight: 700;
  color: var(--accent-solid-green);
}

/* =================================================================
   PHẦN 14: PROFILE PAGE - OVERVIEW & HISTORY
   ================================================================= */

.stats-overview-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
}

.overview-body {
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: center;
    gap: 20px;
}

.stat-details {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.stat-item {
    display: flex;
    flex-direction: column;
}

.stat-item span {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.stat-item strong {
    font-size: 20px;
    font-weight: 600;
}

.chart-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.donut-chart {
    max-width: 75%;
}

.chart-bg {
    fill: none;
    stroke: var(--accent-border);
    stroke-width: 3;
}

.chart-segment {
    fill: none;
    stroke: var(--accent-solid-green);
    stroke-width: 3;
    stroke-linecap: round;
    transform-origin: 50% 50%;
    transform: rotate(-90deg);
}

.supply-overview .chart-segment {
    stroke: #2563eb; /* A blue color for the other chart */
}


.chart-label {
    font-size: 0.6em;
    text-anchor: middle;
    fill: var(--text-primary);
    font-weight: 600;
}

.chart-legend {
    display: flex;
    gap: 16px;
    margin-top: 12px;
    font-size: 12px;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
}

.legend-item span {
    display: block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.legend-item.used span, .legend-item.usdm span {
    background-color: var(--accent-solid-green);
}
.supply-overview .legend-item.usdm span {
     background-color: #2563eb;
}

.legend-item.remaining span, .legend-item.iusd span {
    background-color: var(--accent-border);
}


/* Transaction History */
.history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 16px;
}

.filter-group {
    display: flex;
    gap: 12px;
}

.filter-select {
    background-color: var(--bg-main);
    border: 1px solid var(--accent-border);
    border-radius: var(--border-radius-sm);
    padding: 6px 12px;
    font-size: 14px;
    color: var(--text-primary);
}

.history-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

.history-table th, .history-table td {
    padding: 16px;
    text-align: left;
    border-bottom: 1px solid var(--accent-border);
}

.history-table thead th {
    font-weight: 500;
    color: var(--text-secondary);
    text-transform: uppercase;
    font-size: 12px;
}

.history-table tbody tr:last-child td {
    border-bottom: none;
}

.history-table tbody tr:hover {
    background-color: var(--bg-main);
}

.type-swap, .type-borrow, .type-supply, .type-repay {
    padding: 4px 8px;
    border-radius: 12px;
    font-weight: 500;
    font-size: 12px;
}

.type-swap { background-color: #eff6ff; color: #3b82f6; }
.type-borrow { background-color: #fef2f2; color: #ef4444; }
.type-supply { background-color: #f0fdf4; color: #22c55e; }
.type-repay { background-color: #fffbeb; color: #f59e0b; }

.status-completed {
    color: var(--text-green);
    font-weight: 500;
}

.tx-link {
    font-size: 20px;
    color: var(--text-secondary);
}
.tx-link:hover {
    color: var(--text-primary);
}




  